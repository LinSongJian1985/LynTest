webpackJsonp([1],{"/f/z":function(e,t){},"/wa/":function(e,t){},0:function(e,t,a){a("j1ja"),e.exports=a("NHnr")},"2dYY":function(e,t){},"3GkF":function(e,t){},"5vsP":function(e,t){},"6e5Q":function(e,t){},AXem:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),l=a("NYxO");s.default.use(l.a);var i=new l.a.Store({state:{Authorization:localStorage.getItem("Authorization")?localStorage.getItem("Authorization"):""},mutations:{changeLogin:function(e,t){e.Authorization=t.Authorization,localStorage.setItem("Authorization",t.Authorization)}}}),o={data:function(){return{title:"登录",form:{code:"",password:""},loginBtnShow:!0,regBtnShow:!1}},methods:(Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e})({},Object(l.b)(["changeLogin"]),{doLogin:function(){var e=this;if(""===this.form.code)this.$message.error("请输入账号");else if(""===this.form.password)this.$message.error("请输入密码");else{var t=this;this.$axios({method:"post",url:"/login",headers:{"Content-type":"application/json"},data:this.form}).then(function(a){"501"===a.data.status||"500"===a.data.status?e.$message.error("账号或密码错误"):(e.$message({message:"登录成功",type:"success"}),t.userToken="Bearer "+a.data.body.accessToken,t.changeLogin({Authorization:t.userToken}),t.$router.push({path:"/index"}),e.GLOBAL.userCode=a.data.body.name)},function(e){console.log("登录失败")})}},goToRegistered:function(){this.title="注册",this.loginBtnShow=!1,this.regBtnShow=!0},cancleRegistered:function(){this.title="登录",this.loginBtnShow=!0,this.regBtnShow=!1},registered:function(){var e=this;this.$axios({method:"post",url:"/registered",headers:{"Content-type":"application/json"},data:this.form}).then(function(t){!0===t.data.isSuccess?(e.$message.success("注册成功"),e.doLogin()):!1===t.data.isSuccess&&e.$message.error(t.data.msg)},function(e){console.log("注册失败")})}})},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"backImage"}},[a("div",{staticStyle:{display:"flex","justify-content":"center","margin-top":"200px"}},[a("el-card",{staticStyle:{width:"360px",opacity:"0.8"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.title))])]),e._v(" "),a("el-form",{attrs:{label:"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"工号"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入工号"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.regBtnShow,expression:"regBtnShow"}],attrs:{label:"姓名"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doLogin(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.loginBtnShow,expression:"loginBtnShow"}],attrs:{type:"flex",align:"middle",gutter:20}},[a("el-col",[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.doLogin}},[e._v("登录")])],1),e._v(" "),a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:e.goToRegistered}},[e._v("注册")])],1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.regBtnShow,expression:"regBtnShow"}],attrs:{type:"flex",align:"middle",gutter:20}},[a("el-col",[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.registered}},[e._v("完成")])],1),e._v(" "),a("el-col",[a("el-button",{on:{click:e.cancleRegistered}},[e._v("取消")])],1)],1)],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(o,n,!1,function(e){a("WvbY")},"data-v-5aa12021",null).exports,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},d={data:function(){return{operationType:0,search:{caseName:"",systemName:"",systemNameList:[],createrCode:"",createrList:[]},table:{deleteConfirmDialogVisibel:!1,batchExcuteButtonLoding:!1,page:1,pageSize:10,total:0,tableData:[],multipleSelection:[],ids:[]},dialog:{dialogVisible:!1,userInfoIsShow:!1,defaultCaseInfo:{createrName:"",createrCode:"",createDate:"",updaterName:"",updaterCode:"",updateDate:"",systemName:"",caseName:"",httpType:1,apiUrl:"",apiPort:null,apiMethod:"POST",apiPath:"",description:"",headerForm:[],bodyType:1,jsonValue:null,formBody:[],variableList:[],expectedList:[],status:!1,result:""},caseInfo:{},baseConfig:{httpType:[{label:"http",value:1},{label:"https",value:2}],apiMethodList:["POST","GET","PUT","DELETE"]},requestParams:{activeCollapse:"body",bodyShowList:{jsonShow:!0,formShow:!1},bodyType:1,body:{jsonValue:"",formValue:[{key:"",value:""}]}},responseParams:{activeCollapse:"debug",variable:[],variableTypeList:[{label:"JsonPath提取",value:1},{label:"正则表达式提取",value:2}],expected:[],getValueType:"",getValueTypeList:[{label:"JsonPath",value:1},{label:"正则表达式",value:2}],expectedType:"",expectedTypeList:[{label:"equals",value:1},{label:"contains",value:2}],canDebug:!1,loading:!1,excuteButtonStauts:"success"}}}},mounted:function(){this.getSystemNameList(),this.getCreaterList(),this.searchCaseList()},watch:{operationType:function(e){1===e?(this.dialog.userInfoIsShow=!1,this.dialog.responseParams.canDebug=!1):2===e&&(this.dialog.userInfoIsShow=!0,this.dialog.responseParams.canDebug=!0)}},methods:{getSystemNameList:function(){var e=this;this.$axios({method:"get",url:"/category/list"}).then(function(t){e.search.systemNameList=t.data.result},function(e){})},getCreaterList:function(){var e=this;this.$axios({method:"get",url:"/http/creater"}).then(function(t){e.search.createrList=t.data.result},function(e){})},searchCaseList:function(){var e=this;this.$axios({method:"post",url:"/http/search",headers:{"Content-type":"application/json"},data:{page:this.table.page,pageSize:this.table.pageSize,httpCase:this.search}}).then(function(t){e.table.tableData=t.data.result.list,e.table.total=t.data.result.total},function(e){})},handleSizeChange:function(e){this.table.pageSize=e,this.searchCaseList()},handleCurrentChange:function(e){this.table.page=e,this.searchCaseList()},getTagType:function(e){return"POST"===e?"primary":"GET"===e?"success":"PUT"===e?"warning":"DELETE"===e?"danger":void 0},getCaseStatus:function(e){return e?"成功":"失败"},createCase:function(){this.operationType=1,this.dialog.dialogVisible=!0,this.dialog.caseInfo=c({},this.dialog.defaultCaseInfo)},copyCase:function(){this.operationType=3,1===this.table.multipleSelection.length?(this.dialog.caseInfo=this.table.multipleSelection[0],this.dialog.caseInfo.createDate="",this.dialog.caseInfo.updateDate="",this.saveCase()):this.$message.warning("使用复制时必须且只能选中一条case！")},confirmDeleteCase:function(){this.table.multipleSelection.length>0?this.table.deleteConfirmDialogVisibel=!0:this.$message.warning("请选择至少一条case！")},deleteCase:function(){var e=this;this.$axios({method:"post",url:"/http/delete",headers:{"Content-type":"application/json"},data:this.table.ids}).then(function(t){!0===t.data.isSuccess?(e.$message.success(t.data.result),e.table.deleteConfirmDialogVisibel=!1,e.searchCaseList()):!1===t.data.isSuccess&&e.$message.error(t.data.msg)},function(e){})},batchExcuteSamples:function(){var e=this;this.table.batchExcuteButtonLoding=!0,this.$axios({method:"post",url:"/http/excute",headers:{"Content-type":"application/json"},data:this.table.ids}).then(function(t){e.$message.success("批量执行完成！"),e.table.batchExcuteButtonLoding=!1,e.searchCaseList()},function(t){e.table.batchExcuteButtonLoding=!1})},editCase:function(e){this.operationType=2,this.dialog.dialogVisible=!0,this.dialog.caseInfo=c({},e),this.refreshExcuteButtonStatus()},tableSelectionChange:function(e){this.table.multipleSelection=e,this.table.ids=[];for(var t=0;t<e.length;t++)this.table.ids.push(e[t].id)},addHeader:function(){this.dialog.caseInfo.headerForm.push({headerKey:"",headerValue:""})},deleteHeader:function(e){this.dialog.caseInfo.headerForm.splice(e,1)},changeBodyType:function(e){this.dialog.caseInfo.bodyType=e,1===e?(this.dialog.requestParams.bodyShowList.formShow=!1,this.dialog.requestParams.bodyShowList.jsonShow=!0):2===e&&(this.dialog.requestParams.bodyShowList.formShow=!0,this.dialog.requestParams.bodyShowList.jsonShow=!1)},addBodyForm:function(){this.dialog.caseInfo.formBody.push({formKey:"",formValue:""})},deleteBodyForm:function(e){this.dialog.caseInfo.formBody.splice(e,1)},addVarialbe:function(){this.dialog.caseInfo.variableList.push({extractMethod:"",extractRule:"",variableName:""})},deleteVarialbe:function(e){this.dialog.caseInfo.variableList.splice(e,1)},addExpected:function(){this.dialog.caseInfo.expectedList.push({extractMethod:"",extractRule:"",compareType:"",expectedValue:""})},deleteExpected:function(e){this.dialog.caseInfo.expectedList.splice(e,1)},excuteSample:function(){var e=this;new Promise(function(t,a){e.$axios({method:"post",url:"/http/update",headers:{"Content-type":"application/json"},data:e.dialog.caseInfo}).then(function(a){!0===a.data.isSuccess?e.searchCaseList():!1===a.data.isSuccess&&e.$message.error(a.data.msg),t(a)},function(e){})}).then(function(t){e.dialog.responseParams.loading=!0,e.$axios({method:"post",url:"/http/excute",headers:{"Content-type":"application/json"},data:[e.dialog.caseInfo.id]}).then(function(t){e.dialog.responseParams.loading=!1,e.dialog.caseInfo=t.data.result,e.refreshExcuteButtonStatus()},function(t){e.dialog.responseParams.loading=!1})})},saveCase:function(){var e=this,t="";1===this.operationType||3===this.operationType?t="/http/create":2===this.operationType&&(t="/http/update"),this.$axios({method:"post",url:t,headers:{"Content-type":"application/json"},data:this.dialog.caseInfo}).then(function(t){!0===t.data.isSuccess?(e.$message.success(t.data.result),e.dialog.dialogVisible=!1,e.searchCaseList()):!1===t.data.isSuccess&&e.$message.error(t.data.msg)},function(e){})},refreshExcuteButtonStatus:function(){this.dialog.caseInfo.status?this.dialog.responseParams.excuteButtonStauts="success":this.dialog.responseParams.excuteButtonStauts="danger"}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"接口名称"},model:{value:e.search.caseName,callback:function(t){e.$set(e.search,"caseName",t)},expression:"search.caseName"}}),e._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"系 统",clearable:"",filterable:""},model:{value:e.search.systemName,callback:function(t){e.$set(e.search,"systemName",t)},expression:"search.systemName"}},e._l(e.search.systemNameList,function(e){return a("el-option",{key:e.categoryName,attrs:{label:e.categoryName,value:e.categoryName}})}),1),e._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"创建人",clearable:"",filterable:""},model:{value:e.search.createrCode,callback:function(t){e.$set(e.search,"createrCode",t)},expression:"search.createrCode"}},e._l(e.search.createrList,function(t){return a("el-option",{key:t.createrCode,attrs:{label:t.createrName,value:t.createrCode}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.createrName))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.createrCode))])])}),1),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.searchCaseList}},[e._v("筛 选")])],1),e._v(" "),a("br"),e._v(" "),a("el-card",[a("el-row",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createCase}},[e._v("新 增")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.copyCase}},[e._v("复 制")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmDeleteCase}},[e._v("删 除")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"small",loading:e.table.batchExcuteButtonLoding},on:{click:e.batchExcuteSamples}},[e._v("执 行"),a("i",{staticClass:"el-icon-caret-right el-icon--right"})]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.table.page,"page-size":e.table.pageSize,"page-sizes":[10,20,50,100],total:e.table.total,layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{visible:e.table.deleteConfirmDialogVisibel,width:"400px"},on:{"update:visible":function(t){return e.$set(e.table,"deleteConfirmDialogVisibel",t)}}},[a("span",[e._v("确认删除？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.table.deleteConfirmDialogVisibel=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteCase}},[e._v("确 定")])],1)])],1),e._v(" "),a("br"),e._v(" "),a("el-row",[a("el-table",{ref:"multipleTable",attrs:{data:e.table.tableData,"tooltip-effect":"dark",stripe:""},on:{"selection-change":e.tableSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"接口名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editCase(t.row)}},model:{value:t.row.caseName,callback:function(a){e.$set(t.row,"caseName",a)},expression:"scope.row.caseName"}},[e._v(e._s(t.row.caseName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"接口路径",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.getTagType(t.row.apiMethod),size:"mini"}},[e._v(e._s(t.row.apiMethod))]),e._v(" "),a("span",[e._v(e._s(t.row.apiPath))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"systemName",label:"系 统",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createrName",label:"创建人",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"updaterName",label:"最后更新人",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateDate",label:"最后更新时间",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isSuccess",label:"状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:!0===t.row.status?"success":"danger"}},[e._v(e._s(e.getCaseStatus(t.row.status)))])]}}])})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialog.dialogVisible,"close-on-click-modal":!1,width:"1000px"},on:{"update:visible":function(t){return e.$set(e.dialog,"dialogVisible",t)}}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.dialog.userInfoIsShow,expression:"dialog.userInfoIsShow"}]},[a("el-col",{attrs:{span:3}},[a("span",[e._v("创建人: "+e._s(e.dialog.caseInfo.createrName))])]),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[a("span",[e._v("最后更新: "+e._s(e.dialog.caseInfo.updaterName))])]),e._v(" "),a("el-col",{attrs:{span:5,offset:1}},[a("span",[e._v("最后更新时间: "+e._s(e.dialog.caseInfo.updateDate))])]),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[a("span",[e._v("状态: "+e._s(e.getCaseStatus(e.dialog.caseInfo.status)))])])],1),e._v(" "),a("br"),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("基础配置")])]),e._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"分类名称：",prop:"systemName"}},[a("el-select",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.systemName,callback:function(t){e.$set(e.dialog.caseInfo,"systemName",t)},expression:"dialog.caseInfo.systemName"}},e._l(e.search.systemNameList,function(e){return a("el-option",{key:e.categoryName,attrs:{label:e.categoryName,value:e.categoryName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接口名称：",prop:"caseName"}},[a("el-input",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.caseName,callback:function(t){e.$set(e.dialog.caseInfo,"caseName",t)},expression:"dialog.caseInfo.caseName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"域名地址：",prop:"apiUrl"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.dialog.caseInfo.apiUrl,callback:function(t){e.$set(e.dialog.caseInfo,"apiUrl",t)},expression:"dialog.caseInfo.apiUrl"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.dialog.caseInfo.httpType,callback:function(t){e.$set(e.dialog.caseInfo,"httpType",t)},expression:"dialog.caseInfo.httpType"}},e._l(e.dialog.baseConfig.httpType,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("span",{staticStyle:{padding:"0px 20px"}},[e._v("端口号：")]),e._v(" "),a("el-input",{staticStyle:{width:"100px"},model:{value:e.dialog.caseInfo.apiPort,callback:function(t){e.$set(e.dialog.caseInfo,"apiPort",t)},expression:"dialog.caseInfo.apiPort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接口路径：",prop:"apiPath"}},[a("el-input",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.apiPath,callback:function(t){e.$set(e.dialog.caseInfo,"apiPath",t)},expression:"dialog.caseInfo.apiPath"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.dialog.caseInfo.apiMethod,callback:function(t){e.$set(e.dialog.caseInfo,"apiMethod",t)},expression:"dialog.caseInfo.apiMethod"}},e._l(e.dialog.baseConfig.apiMethodList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注信息："}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:1,maxRows:4},placeholder:"备注"},model:{value:e.dialog.caseInfo.description,callback:function(t){e.$set(e.dialog.caseInfo,"description",t)},expression:"dialog.caseInfo.description"}})],1)],1)],1),e._v(" "),a("br"),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("请求参数")])]),e._v(" "),a("el-collapse",{model:{value:e.dialog.requestParams.activeCollapse,callback:function(t){e.$set(e.dialog.requestParams,"activeCollapse",t)},expression:"dialog.requestParams.activeCollapse"}},[a("el-collapse-item",{attrs:{title:"Headers",name:"headers"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addHeader}},[e._v("新增Header")]),e._v(" "),a("el-form",e._l(e.dialog.caseInfo.headerForm,function(t,s){return a("el-form-item",{key:s,staticStyle:{"margin-bottom":"0px"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"small",placeholder:"请输入key"},model:{value:t.headerKey,callback:function(a){e.$set(t,"headerKey",a)},expression:"item.headerKey"}}),e._v(" "),a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入value"},model:{value:t.headerValue,callback:function(a){e.$set(t,"headerValue",a)},expression:"item.headerValue"}}),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteHeader(s)}}},[a("i",{staticClass:"el-icon-delete"})])],1)}),1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"Body",name:"body"}},[a("el-radio-group",{on:{change:e.changeBodyType},model:{value:e.dialog.requestParams.bodyType,callback:function(t){e.$set(e.dialog.requestParams,"bodyType",t)},expression:"dialog.requestParams.bodyType"}},[a("el-radio",{attrs:{label:1}},[e._v("json")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("form")]),e._v(" "),a("el-radio",{attrs:{label:3,disabled:""}},[e._v("file")])],1),e._v(" "),a("br"),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.dialog.requestParams.bodyShowList.formShow,expression:"dialog.requestParams.bodyShowList.formShow"}]},[a("br"),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addBodyForm}},[e._v("新 增")]),e._v(" "),a("el-form",e._l(e.dialog.caseInfo.formBody,function(t,s){return a("el-form-item",{key:s,staticStyle:{"margin-bottom":"0px"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"small",placeholder:"请输入key"},model:{value:t.formKey,callback:function(a){e.$set(t,"formKey",a)},expression:"item.formKey"}}),e._v(" "),a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入value"},model:{value:t.formValue,callback:function(a){e.$set(t,"formValue",a)},expression:"item.formValue"}}),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteBodyForm(s)}}},[a("i",{staticClass:"el-icon-delete"})])],1)}),1)],1),e._v(" "),a("br"),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.dialog.requestParams.bodyShowList.jsonShow,expression:"dialog.requestParams.bodyShowList.jsonShow"}],attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请输入内容"},model:{value:e.dialog.caseInfo.jsonValue,callback:function(t){e.$set(e.dialog.caseInfo,"jsonValue",t)},expression:"dialog.caseInfo.jsonValue"}})],1)],1)],1),e._v(" "),a("br"),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("返回结果")])]),e._v(" "),a("el-collapse",{model:{value:e.dialog.responseParams.activeCollapse,callback:function(t){e.$set(e.dialog.responseParams,"activeCollapse",t)},expression:"dialog.responseParams.activeCollapse"}},[a("el-collapse-item",{attrs:{title:"保存变量",name:"variable"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addVarialbe}},[e._v("新 增")]),e._v(" "),a("el-form",e._l(e.dialog.caseInfo.variableList,function(t,s){return a("el-form-item",{key:s,staticStyle:{"margin-bottom":"0px"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择取值方式",size:"small"},model:{value:t.extractMethod,callback:function(a){e.$set(t,"extractMethod",a)},expression:"item.extractMethod"}},e._l(e.dialog.responseParams.variableTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"提取路径"},model:{value:t.extractRule,callback:function(a){e.$set(t,"extractRule",a)},expression:"item.extractRule"}}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"为保持变量名规范，请输入大写、下划线，类似于VARIABLE_TYPE,引用时使用${VARIABLE_TYPE}",placement:"top-end"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"变量名"},model:{value:t.variableName,callback:function(a){e.$set(t,"variableName",a)},expression:"item.variableName"}})],1),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteVarialbe(s)}}},[a("i",{staticClass:"el-icon-delete"})])],1)}),1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"校验",name:"expected"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addExpected}},[e._v("新 增")]),e._v(" "),a("el-form",e._l(e.dialog.caseInfo.expectedList,function(t,s){return a("el-form-item",{key:s,staticStyle:{"margin-bottom":"0px"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"获取方式",size:"small"},model:{value:t.extractMethod,callback:function(a){e.$set(t,"extractMethod",a)},expression:"item.extractMethod"}},e._l(e.dialog.responseParams.getValueTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"提取路径/规则"},model:{value:t.extractRule,callback:function(a){e.$set(t,"extractRule",a)},expression:"item.extractRule"}}),e._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"校验方式",size:"small"},model:{value:t.compareType,callback:function(a){e.$set(t,"compareType",a)},expression:"item.compareType"}},e._l(e.dialog.responseParams.expectedTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"预期值"},model:{value:t.expectedValue,callback:function(a){e.$set(t,"expectedValue",a)},expression:"item.expectedValue"}}),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteExpected(s)}}},[a("i",{staticClass:"el-icon-delete"})])],1)}),1)],1),e._v(" "),a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.dialog.responseParams.canDebug,expression:"dialog.responseParams.canDebug"}],attrs:{title:"调试",name:"debug"}},[a("el-button",{attrs:{type:e.dialog.responseParams.excuteButtonStauts,size:"small",loading:e.dialog.responseParams.loading},on:{click:e.excuteSample}},[e._v("执 行"),a("i",{staticClass:"el-icon-caret-right el-icon--right"})]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},placeholder:"返回结果"},model:{value:e.dialog.caseInfo.result,callback:function(t){e.$set(e.dialog.caseInfo,"result",t)},expression:"dialog.caseInfo.result"}})],1)],1)],1),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveCase}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialog.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(e){a("6e5Q")},"data-v-40f8b4fe",null).exports,h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},m={name:"DubboCaseManage.vue",data:function(){return{operationType:0,search:{caseName:"",systemName:"",systemNameList:[],createrCode:"",createrList:[]},table:{deleteConfirmDialogVisibel:!1,batchExcuteButtonLoding:!1,page:1,pageSize:10,total:0,tableData:[],multipleSelection:[],ids:[]},dialog:{dialogVisible:!1,userInfoIsShow:!1,defaultCaseInfo:{createrName:"",createrCode:"",createDate:"",updaterName:"",updaterCode:"",updateDate:"",systemName:"",caseName:"",apiName:"",zkAddress:"",serviceName:"",groupName:"",version:"",params:"",functionName:"",className:"",description:"",variableList:[],expectedList:[],status:!1,result:""},caseInfo:{},responseParams:{activeCollapse:"debug",variable:[],variableTypeList:[{label:"JsonPath提取",value:1},{label:"正则表达式提取",value:2}],expected:[],getValueType:"",getValueTypeList:[{label:"JsonPath",value:1},{label:"正则表达式",value:2}],expectedType:"",expectedTypeList:[{label:"equals",value:1},{label:"contains",value:2}],canDebug:!1,loading:!1,excuteButtonStauts:"success"}}}},mounted:function(){this.getSystemNameList(),this.getCreaterList(),this.searchCaseList()},watch:{operationType:function(e){1===e?(this.dialog.userInfoIsShow=!1,this.dialog.responseParams.canDebug=!1):2===e&&(this.dialog.userInfoIsShow=!0,this.dialog.responseParams.canDebug=!0)}},methods:{getSystemNameList:function(){var e=this;this.$axios({method:"get",url:"/category/list"}).then(function(t){e.search.systemNameList=t.data.result},function(e){})},getCreaterList:function(){var e=this;this.$axios({method:"get",url:"/dubbo/creater"}).then(function(t){e.search.createrList=t.data.result},function(e){})},searchCaseList:function(){var e=this;this.$axios({method:"post",url:"/dubbo/search",headers:{"Content-type":"application/json"},data:{page:this.table.page,pageSize:this.table.pageSize,dubboCase:this.search}}).then(function(t){e.table.tableData=t.data.result.list,e.table.total=t.data.result.total},function(e){})},createCase:function(){this.operationType=1,this.dialog.dialogVisible=!0,this.dialog.caseInfo=h({},this.dialog.defaultCaseInfo)},copyCase:function(){this.operationType=3,1===this.table.multipleSelection.length?(this.dialog.caseInfo=this.table.multipleSelection[0],this.dialog.caseInfo.createDate="",this.dialog.caseInfo.updateDate="",this.saveCase()):this.$message.warning("使用复制时必须且只能选中一条case！")},saveCase:function(){var e=this,t="";1===this.operationType||3===this.operationType?t="/dubbo/create":2===this.operationType&&(t="/dubbo/update"),this.$axios({method:"post",url:t,headers:{"Content-type":"application/json"},data:this.dialog.caseInfo}).then(function(t){!0===t.data.isSuccess?(e.$message.success(t.data.result),e.dialog.dialogVisible=!1,e.searchCaseList()):!1===t.data.isSuccess&&e.$message.error(t.data.msg)},function(e){})},confirmDeleteCase:function(){this.table.multipleSelection.length>0?this.table.deleteConfirmDialogVisibel=!0:this.$message.warning("请选择至少一条case！")},batchExcuteSamples:function(){var e=this;this.table.batchExcuteButtonLoding=!0,this.$axios({method:"post",url:"/dubbo/excute",headers:{"Content-type":"application/json"},data:this.table.ids}).then(function(t){e.$message.success("批量执行完成！"),e.table.batchExcuteButtonLoding=!1,e.searchCaseList()},function(t){e.table.batchExcuteButtonLoding=!1})},handleSizeChange:function(e){this.table.pageSize=e,this.searchCaseList()},handleCurrentChange:function(e){this.table.page=e,this.searchCaseList()},deleteCase:function(){var e=this;this.$axios({method:"post",url:"/dubbo/delete",headers:{"Content-type":"application/json"},data:this.table.ids}).then(function(t){!0===t.data.isSuccess?(e.$message.success(t.data.result),e.table.deleteConfirmDialogVisibel=!1,e.searchCaseList()):!1===t.data.isSuccess&&e.$message.error(t.data.msg)},function(e){})},tableSelectionChange:function(e){this.table.multipleSelection=e,this.table.ids=[];for(var t=0;t<e.length;t++)this.table.ids.push(e[t].id)},editCase:function(e){this.operationType=2,this.dialog.dialogVisible=!0,this.dialog.caseInfo=h({},e)},getCaseStatus:function(e){return e?"成功":"失败"},addVarialbe:function(){this.dialog.caseInfo.variableList.push({extractMethod:"",extractRule:"",variableName:""})},deleteVarialbe:function(e){this.dialog.caseInfo.variableList.splice(e,1)},addExpected:function(){this.dialog.caseInfo.expectedList.push({extractMethod:"",extractRule:"",compareType:"",expectedValue:""})},deleteExpected:function(e){this.dialog.caseInfo.expectedList.splice(e,1)},excuteSample:function(){var e=this;new Promise(function(t,a){e.$axios({method:"post",url:"/dubbo/update",headers:{"Content-type":"application/json"},data:e.dialog.caseInfo}).then(function(a){!0===a.data.isSuccess?e.searchCaseList():!1===a.data.isSuccess&&e.$message.error(a.data.msg),t(a)},function(e){})}).then(function(t){e.dialog.responseParams.loading=!0,e.$axios({method:"post",url:"/dubbo/excute",headers:{"Content-type":"application/json"},data:[e.dialog.caseInfo.id]}).then(function(t){e.dialog.responseParams.loading=!1,e.dialog.caseInfo=t.data.result,e.refreshExcuteButtonStatus()},function(t){e.dialog.responseParams.loading=!1})})},refreshExcuteButtonStatus:function(){this.dialog.caseInfo.status?this.dialog.responseParams.excuteButtonStauts="success":this.dialog.responseParams.excuteButtonStauts="danger"}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"接口名称"},model:{value:e.search.caseName,callback:function(t){e.$set(e.search,"caseName",t)},expression:"search.caseName"}}),e._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"系 统",clearable:"",filterable:""},model:{value:e.search.systemName,callback:function(t){e.$set(e.search,"systemName",t)},expression:"search.systemName"}},e._l(e.search.systemNameList,function(e){return a("el-option",{key:e.categoryName,attrs:{label:e.categoryName,value:e.categoryName}})}),1),e._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"创建人",clearable:"",filterable:""},model:{value:e.search.createrCode,callback:function(t){e.$set(e.search,"createrCode",t)},expression:"search.createrCode"}},e._l(e.search.createrList,function(t){return a("el-option",{key:t.createrCode,attrs:{label:t.createrName,value:t.createrCode}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.createrName))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.createrCode))])])}),1),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.searchCaseList}},[e._v("筛 选")])],1),e._v(" "),a("br"),e._v(" "),a("el-card",[a("el-row",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createCase}},[e._v("新 增")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.copyCase}},[e._v("复 制")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmDeleteCase}},[e._v("删 除")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"small",loading:e.table.batchExcuteButtonLoding},on:{click:e.batchExcuteSamples}},[e._v("执 行"),a("i",{staticClass:"el-icon-caret-right el-icon--right"})]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.table.page,"page-size":e.table.pageSize,"page-sizes":[10,20,50,100],total:e.table.total,layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{visible:e.table.deleteConfirmDialogVisibel,width:"400px"},on:{"update:visible":function(t){return e.$set(e.table,"deleteConfirmDialogVisibel",t)}}},[a("span",[e._v("确认删除？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.table.deleteConfirmDialogVisibel=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteCase}},[e._v("确 定")])],1)])],1),e._v(" "),a("br"),e._v(" "),a("el-row",[a("el-table",{ref:"multipleTable",attrs:{data:e.table.tableData,"tooltip-effect":"dark",stripe:""},on:{"selection-change":e.tableSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"接口名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editCase(t.row)}},model:{value:t.row.caseName,callback:function(a){e.$set(t.row,"caseName",a)},expression:"scope.row.caseName"}},[e._v(e._s(t.row.caseName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"版本",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"mini"}},[e._v(e._s(t.row.version))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"systemName",label:"系 统",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createrName",label:"创建人",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"updaterName",label:"最后更新人",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateDate",label:"最后更新时间",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isSuccess",label:"状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:!0===t.row.status?"success":"danger"}},[e._v(e._s(e.getCaseStatus(t.row.status)))])]}}])})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialog.dialogVisible,"close-on-click-modal":!1,width:"1000px"},on:{"update:visible":function(t){return e.$set(e.dialog,"dialogVisible",t)}}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.dialog.userInfoIsShow,expression:"dialog.userInfoIsShow"}]},[a("el-col",{attrs:{span:3}},[a("span",[e._v("创建人: "+e._s(e.dialog.caseInfo.createrName))])]),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[a("span",[e._v("最后更新: "+e._s(e.dialog.caseInfo.updaterName))])]),e._v(" "),a("el-col",{attrs:{span:5,offset:1}},[a("span",[e._v("最后更新时间: "+e._s(e.dialog.caseInfo.updateDate))])]),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[a("span",[e._v("状态: "+e._s(e.getCaseStatus(e.dialog.caseInfo.status)))])])],1),e._v(" "),a("br"),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("基础配置")])]),e._v(" "),a("el-form",{attrs:{"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称：",prop:"systemName"}},[a("el-select",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.systemName,callback:function(t){e.$set(e.dialog.caseInfo,"systemName",t)},expression:"dialog.caseInfo.systemName"}},e._l(e.search.systemNameList,function(e){return a("el-option",{key:e.categoryName,attrs:{label:e.categoryName,value:e.categoryName}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接口名称："}},[a("el-input",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.caseName,callback:function(t){e.$set(e.dialog.caseInfo,"caseName",t)},expression:"dialog.caseInfo.caseName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"ZK地址："}},[a("el-input",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.zkAddress,callback:function(t){e.$set(e.dialog.caseInfo,"zkAddress",t)},expression:"dialog.caseInfo.zkAddress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务名："}},[a("el-input",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.serviceName,callback:function(t){e.$set(e.dialog.caseInfo,"serviceName",t)},expression:"dialog.caseInfo.serviceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"GROUP："}},[a("el-input",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.groupName,callback:function(t){e.$set(e.dialog.caseInfo,"groupName",t)},expression:"dialog.caseInfo.groupName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"版本："}},[a("el-input",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.version,callback:function(t){e.$set(e.dialog.caseInfo,"version",t)},expression:"dialog.caseInfo.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"入参："}},[a("el-input",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.params,callback:function(t){e.$set(e.dialog.caseInfo,"params",t)},expression:"dialog.caseInfo.params"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"函数名："}},[a("el-input",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.functionName,callback:function(t){e.$set(e.dialog.caseInfo,"functionName",t)},expression:"dialog.caseInfo.functionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类名："}},[a("el-input",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.className,callback:function(t){e.$set(e.dialog.caseInfo,"className",t)},expression:"dialog.caseInfo.className"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注信息："}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:1,maxRows:4},placeholder:"备注"},model:{value:e.dialog.caseInfo.description,callback:function(t){e.$set(e.dialog.caseInfo,"description",t)},expression:"dialog.caseInfo.description"}})],1)],1)],1),e._v(" "),a("br"),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("返回结果")])]),e._v(" "),a("el-collapse",{model:{value:e.dialog.responseParams.activeCollapse,callback:function(t){e.$set(e.dialog.responseParams,"activeCollapse",t)},expression:"dialog.responseParams.activeCollapse"}},[a("el-collapse-item",{attrs:{title:"保存变量",name:"variable"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addVarialbe}},[e._v("新 增")]),e._v(" "),a("el-form",e._l(e.dialog.caseInfo.variableList,function(t,s){return a("el-form-item",{key:s,staticStyle:{"margin-bottom":"0px"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择取值方式",size:"small"},model:{value:t.extractMethod,callback:function(a){e.$set(t,"extractMethod",a)},expression:"item.extractMethod"}},e._l(e.dialog.responseParams.variableTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"提取路径"},model:{value:t.extractRule,callback:function(a){e.$set(t,"extractRule",a)},expression:"item.extractRule"}}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"为保持变量名规范，请输入大写、下划线，类似于VARIABLE_TYPE,引用时使用${VARIABLE_TYPE}",placement:"top-end"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"变量名"},model:{value:t.variableName,callback:function(a){e.$set(t,"variableName",a)},expression:"item.variableName"}})],1),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteVarialbe(s)}}},[a("i",{staticClass:"el-icon-delete"})])],1)}),1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"校验",name:"expected"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addExpected}},[e._v("新 增")]),e._v(" "),a("el-form",e._l(e.dialog.caseInfo.expectedList,function(t,s){return a("el-form-item",{key:s,staticStyle:{"margin-bottom":"0px"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"获取方式",size:"small"},model:{value:t.extractMethod,callback:function(a){e.$set(t,"extractMethod",a)},expression:"item.extractMethod"}},e._l(e.dialog.responseParams.getValueTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"提取路径/规则"},model:{value:t.extractRule,callback:function(a){e.$set(t,"extractRule",a)},expression:"item.extractRule"}}),e._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"校验方式",size:"small"},model:{value:t.compareType,callback:function(a){e.$set(t,"compareType",a)},expression:"item.compareType"}},e._l(e.dialog.responseParams.expectedTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"预期值"},model:{value:t.expectedValue,callback:function(a){e.$set(t,"expectedValue",a)},expression:"item.expectedValue"}}),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteExpected(s)}}},[a("i",{staticClass:"el-icon-delete"})])],1)}),1)],1),e._v(" "),a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.dialog.responseParams.canDebug,expression:"dialog.responseParams.canDebug"}],attrs:{title:"调试",name:"debug"}},[a("el-button",{attrs:{type:e.dialog.responseParams.excuteButtonStauts,size:"small",loading:e.dialog.responseParams.loading},on:{click:e.excuteSample}},[e._v("执 行"),a("i",{staticClass:"el-icon-caret-right el-icon--right"})]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},placeholder:"返回结果"},model:{value:e.dialog.caseInfo.result,callback:function(t){e.$set(e.dialog.caseInfo,"result",t)},expression:"dialog.caseInfo.result"}})],1)],1)],1),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveCase}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialog.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(m,g,!1,function(e){a("3GkF")},"data-v-218e81c4",null).exports,v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},b={data:function(){return{editType:0,search:{page:1,pageSize:10,total:0,sqlCase:{caseName:"",dataBaseId:"",createrCode:""}},dataBaseList:[],createrList:[],tableData:[],dialog:{dialogVisible:!1,userInfoIsShow:!1,caseInfo:{},defaultCaseInfo:{createrName:"",createrCode:"",createDate:"",sql:"",description:"",variableList:[],result:""},responseParams:{activeCollapse:"debug",variable:[],variableTypeList:[{label:"JsonPath提取",value:1},{label:"正则表达式提取",value:2}],canDebug:!1,loading:!1,excuteButtonStauts:"success"}}}},mounted:function(){this.getDataBaseList(),this.getCreaterList(),this.searchCaseList()},watch:{editType:function(e){1===e?(this.dialog.userInfoIsShow=!1,this.dialog.responseParams.canDebug=!1):2===e&&(this.dialog.userInfoIsShow=!0,this.dialog.responseParams.canDebug=!0)}},methods:{getDataBaseList:function(){var e=this;this.$axios({method:"post",url:"/db/list",headers:{"Content-type":"application/json"},data:{page:1,pageSize:100}}).then(function(t){e.dataBaseList=t.data.result.list},function(e){})},getCreaterList:function(){var e=this;this.$axios({method:"get",url:"/sql/creater"}).then(function(t){e.createrList=t.data.result},function(e){})},searchCaseList:function(){var e=this;this.$axios({method:"post",url:"/sql/search",headers:{"Content-type":"application/json"},data:this.search}).then(function(t){e.tableData=t.data.result.list,e.search.total=t.data.result.total},function(e){})},createCase:function(){this.editType=1,this.dialog.dialogVisible=!0,this.dialog.caseInfo=v({},this.dialog.defaultCaseInfo)},deleteCase:function(e){var t=this;this.$axios({method:"post",url:"/sql/delete",headers:{"Content-type":"application/json"},data:e}).then(function(e){!0===e.data.isSuccess?(t.$message.success(e.data.result),t.searchCaseList()):!1===e.data.isSuccess&&t.$message.error(e.data.msg),resolve(e)},function(e){})},handleSizeChange:function(e){this.search.pageSize=e,this.searchCaseList()},handleCurrentChange:function(e){this.search.page=e,this.searchCaseList()},editCase:function(e){this.editType=2,this.dialog.dialogVisible=!0,this.dialog.caseInfo=v({},e)},addVarialbe:function(){this.dialog.caseInfo.variableList.push({extractMethod:"",extractRule:"",variableName:""})},deleteVarialbe:function(e){this.dialog.caseInfo.variableList.splice(e,1)},excuteSql:function(){var e=this;new Promise(function(t,a){e.$axios({method:"post",url:"/sql/update",headers:{"Content-type":"application/json"},data:e.dialog.caseInfo}).then(function(a){!0===a.data.isSuccess?e.searchCaseList():!1===a.data.isSuccess&&e.$message.error(a.data.msg),t(a)},function(e){})}).then(function(t){e.dialog.responseParams.loading=!0,e.$axios({method:"post",url:"/sql/excute",headers:{"Content-type":"application/json"},data:e.dialog.caseInfo}).then(function(t){e.dialog.responseParams.loading=!1,e.dialog.caseInfo=t.data.result},function(t){e.dialog.responseParams.loading=!1})})},saveCase:function(){var e=this,t="";1===this.editType||3===this.editType?t="/sql/create":2===this.editType&&(t="/sql/update"),this.$axios({method:"post",url:t,headers:{"Content-type":"application/json"},data:this.dialog.caseInfo}).then(function(t){!0===t.data.isSuccess?(e.$message.success(t.data.result),e.dialog.dialogVisible=!1,e.searchCaseList()):!1===t.data.isSuccess&&e.$message.error(t.data.msg)},function(e){})}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"Case名称"},model:{value:e.search.sqlCase.caseName,callback:function(t){e.$set(e.search.sqlCase,"caseName",t)},expression:"search.sqlCase.caseName"}}),e._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"数据库",clearable:"",filterable:""},model:{value:e.search.sqlCase.dataBaseId,callback:function(t){e.$set(e.search.sqlCase,"dataBaseId",t)},expression:"search.sqlCase.dataBaseId"}},e._l(e.dataBaseList,function(e){return a("el-option",{key:e.dbName,attrs:{label:e.dbName,value:e.id}})}),1),e._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"创建人",clearable:"",filterable:""},model:{value:e.search.sqlCase.createrCode,callback:function(t){e.$set(e.search.sqlCase,"createrCode",t)},expression:"search.sqlCase.createrCode"}},e._l(e.createrList,function(t){return a("el-option",{key:t.createrCode,attrs:{label:t.createrName,value:t.createrCode}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.createrName))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.createrCode))])])}),1),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.searchCaseList}},[e._v("筛 选")])],1),e._v(" "),a("br"),e._v(" "),a("el-card",[a("el-row",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createCase}},[e._v("新 增")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.search.page,"page-size":e.search.pageSize,"page-sizes":[10,20,50,100],total:e.search.total,layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-table",{attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"caseName",label:"Case名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editCase(t.row)}},model:{value:t.row.caseName,callback:function(a){e.$set(t.row,"caseName",a)},expression:"scope.row.caseName"}},[e._v(e._s(t.row.caseName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"databaseName",label:"数据库"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createrName",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sql",label:"SQL语句","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(a){return e.deleteCase(t.row.id)}},slot:"reference"},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialog.dialogVisible,"close-on-click-modal":!1,width:"1000px"},on:{"update:visible":function(t){return e.$set(e.dialog,"dialogVisible",t)}}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.dialog.userInfoIsShow,expression:"dialog.userInfoIsShow"}]},[a("el-col",{attrs:{span:3}},[a("span",[e._v("创建人: "+e._s(e.dialog.caseInfo.createrName))])])],1),e._v(" "),a("br"),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("基础配置")])]),e._v(" "),a("el-form",{attrs:{"label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"数据库："}},[a("el-select",{staticStyle:{width:"500px"},model:{value:e.dialog.caseInfo.databaseId,callback:function(t){e.$set(e.dialog.caseInfo,"databaseId",t)},expression:"dialog.caseInfo.databaseId"}},e._l(e.dataBaseList,function(e){return a("el-option",{key:e.id,attrs:{label:e.dbName,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Case名称："}},[a("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"Case名称"},model:{value:e.dialog.caseInfo.caseName,callback:function(t){e.$set(e.dialog.caseInfo,"caseName",t)},expression:"dialog.caseInfo.caseName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"SQL语句："}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:6},placeholder:"SQL"},model:{value:e.dialog.caseInfo.sql,callback:function(t){e.$set(e.dialog.caseInfo,"sql",t)},expression:"dialog.caseInfo.sql"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注信息："}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:1,maxRows:4},placeholder:"备注"},model:{value:e.dialog.caseInfo.description,callback:function(t){e.$set(e.dialog.caseInfo,"description",t)},expression:"dialog.caseInfo.description"}})],1)],1)],1),e._v(" "),a("br"),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("返回结果")])]),e._v(" "),a("el-collapse",{model:{value:e.dialog.responseParams.activeCollapse,callback:function(t){e.$set(e.dialog.responseParams,"activeCollapse",t)},expression:"dialog.responseParams.activeCollapse"}},[a("el-collapse-item",{attrs:{title:"保存变量",name:"variable"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addVarialbe}},[e._v("新 增")]),e._v(" "),a("el-form",e._l(e.dialog.caseInfo.variableList,function(t,s){return a("el-form-item",{key:s,staticStyle:{"margin-bottom":"0px"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择取值方式",size:"small"},model:{value:t.extractMethod,callback:function(a){e.$set(t,"extractMethod",a)},expression:"item.extractMethod"}},e._l(e.dialog.responseParams.variableTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"提取路径"},model:{value:t.extractRule,callback:function(a){e.$set(t,"extractRule",a)},expression:"item.extractRule"}}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"为保持变量名规范，请输入大写、下划线，类似于VARIABLE_TYPE,引用时使用${VARIABLE_TYPE}",placement:"top-end"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"变量名"},model:{value:t.variableName,callback:function(a){e.$set(t,"variableName",a)},expression:"item.variableName"}})],1),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteVarialbe(s)}}},[a("i",{staticClass:"el-icon-delete"})])],1)}),1)],1),e._v(" "),a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.dialog.responseParams.canDebug,expression:"dialog.responseParams.canDebug"}],attrs:{title:"调试",name:"debug"}},[a("el-button",{attrs:{type:e.dialog.responseParams.excuteButtonStauts,size:"small",loading:e.dialog.responseParams.loading},on:{click:e.excuteSql}},[e._v("执 行"),a("i",{staticClass:"el-icon-caret-right el-icon--right"})]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},placeholder:"返回结果"},model:{value:e.dialog.caseInfo.result,callback:function(t){e.$set(e.dialog.caseInfo,"result",t)},expression:"dialog.caseInfo.result"}})],1)],1)],1),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveCase}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialog.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(b,y,!1,function(e){a("i7PA")},"data-v-649fc894",null).exports,x=a("u4Bf"),C=a.n(x),S=a("8/7D"),w=a.n(S),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},k={props:{collectionId:{type:Number}},data:function(){return{scroll:{vuescroll:{mode:"native",sizeStrategy:"percent"},scrollPanel:{easing:"easeInQuad",speed:800,scrollingX:!1},rail:{opacity:"10",background:void 0,size:"12px"},bar:{background:"#bbbbbb",keepShow:!1,size:"10px",minSize:.2}},collectionInfo:{isFocus:!1,collectionName:null,variableList:[],excuterName:null,excuteDatetime:null,reportPath:null,wxPush:!1,repeatTimes:1,threadPoolSize:1},collectionEditDialog:{visible:!1},variableDialog:{visible:!1,deleteButtonIsShow:!1,variableInfo:{collectionId:null},defaultVariableInfo:{variableName:"",variableValue:"",description:""}},caseInfo:{collectionId:null,caseList:[]},caseManageDialog:{visible:!1,caseType:1,caseTypeList:[{label:"Http",value:1},{label:"Dubbo",value:2},{label:"Sql",value:3}],search:{systemNameList:[],createrList:[],page:1,pageSize:10,total:0,commomCase:{caseName:"",createrCode:""}},AllCaseList:[]}}},mounted:function(){this.getCollectionDetail(),this.getCollectionCaseList(),this.searchCaseList(),this.getSystemNameList(),this.getCreaterList()},methods:{editCollection:function(){var e=this;this.$axios({method:"post",url:"/collection/edit",headers:{"Content-type":"application/json"},data:this.collectionInfo}).then(function(t){e.collectionEditDialog.visible=!1,e.getCollectionDetail()},function(e){})},getCollectionDetail:function(){var e=this;this.$axios({method:"post",url:"/collection/detail",headers:{"Content-type":"application/json"},data:this.collectionId}).then(function(t){e.collectionInfo=t.data.result},function(e){})},getSystemNameList:function(){var e=this;this.$axios({method:"get",url:"/category/list"}).then(function(t){e.caseManageDialog.search.systemNameList=t.data.result},function(e){})},getCreaterList:function(){var e=this;this.$axios({method:"get",url:"/http/creater"}).then(function(t){e.caseManageDialog.search.createrList=t.data.result},function(e){})},getTagType:function(e){return 1===e||2===e?"primary":"GET"===e?"success":"PUT"===e?"warning":3===e?"danger":void 0},getTypeName:function(e){return 1===e?"Http":2===e?"Dubbo":3===e?"MySql":void 0},doFocus:function(e){this.$axios({method:"post",url:"/collection/focus",headers:{"Content-type":"application/json"},data:{focusType:e,collectionId:this.collectionId}})},changePoolSize:function(e){this.collectionInfo.threadPoolSize=e,this.editCollection()},changeRepeatTimes:function(e){this.collectionInfo.repeatTimes=e,this.editCollection()},createVariable:function(){this.variableDialog.editType=1,this.variableDialog.deleteButtonIsShow=!1,this.variableDialog.visible=!0,this.variableDialog.variableInfo=I({},this.variableDialog.defaultVariableInfo),this.variableDialog.variableInfo.collectionId=this.collectionId},editVariable:function(e){this.variableDialog.editType=2,this.variableDialog.deleteButtonIsShow=!0,this.variableDialog.visible=!0,this.variableDialog.variableInfo=I({},e)},variableOperation:function(e){var t=this,a="";2===e?a="/collection/variable/delete":1===e&&(1===this.variableDialog.editType?a="/collection/variable/insert":2===this.variableDialog.editType&&(a="/collection/variable/update")),this.$axios({method:"post",url:a,headers:{"Content-type":"application/json"},data:this.variableDialog.variableInfo}).then(function(e){t.$message.success(e.data.result),t.variableDialog.visible=!1,t.getCollectionDetail()},function(e){})},getCollectionCaseList:function(){var e=this;this.$axios({method:"post",url:"/collection/case/list",headers:{"Content-type":"application/json"},data:{collectionId:this.collectionId}}).then(function(t){e.caseInfo.caseList=t.data.result,e.caseInfo.collectionId=e.collectionId},function(e){})},orderSave:function(){var e=this,t={1:[],2:[],3:[]},a=!0,s=!1,l=void 0;try{for(var i,o=this.caseInfo.caseList[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var n=i.value;if(t[n.caseType].indexOf(n.id)>-1)return this.$message.error("请勿重复添加!"),void this.getCollectionCaseList();t[n.caseType].push(n.id)}}catch(e){s=!0,l=e}finally{try{!a&&o.return&&o.return()}finally{if(s)throw l}}this.$axios({method:"post",url:"/collection/case/order",headers:{"Content-type":"application/json"},data:this.caseInfo}).then(function(t){t.data.isSuccess||(e.$message.error(t.data.msg),e.getCollectionCaseList())},function(t){e.$message.error("添加异常")})},deleteCase:function(e){var t=this;this.$axios({method:"post",url:"/collection/case/delete",headers:{"Content-type":"application/json"},data:e}).then(function(e){e.data.isSuccess||t.$message.error(e.data.msg),t.getCollectionCaseList()},function(e){})},handleCurrentChange:function(e){this.caseManageDialog.search.page=e,this.searchCaseList()},chaneCaseType:function(){this.caseManageDialog.search.page=1,this.searchCaseList()},searchCaseList:function(){var e=this,t="",a=this.caseManageDialog.search,s=I({},this.caseManageDialog.search.commomCase);1===this.caseManageDialog.caseType?(t="/http/search",a.httpCase=s):2===this.caseManageDialog.caseType?(t="/dubbo/search",a.dubboCase=s):3===this.caseManageDialog.caseType&&(t="/sql/search",a.sqlCase=s),this.$axios({method:"post",url:t,headers:{"Content-type":"application/json"},data:a}).then(function(t){e.caseManageDialog.AllCaseList=t.data.result.list;for(var a=0;a<e.caseManageDialog.AllCaseList.length;a++)e.caseManageDialog.AllCaseList[a].caseType=e.caseManageDialog.caseType;e.caseManageDialog.search.total=t.data.result.total},function(e){})},collectionExcute:function(){var e=this;this.$axios({method:"post",url:"/collection/run",headers:{"Content-type":"application/json"},data:this.collectionId}).then(function(t){t.data.isSuccess&&(e.$message.success(t.data.result),e.getCollectionDetail())},function(e){})},openReport:function(){window.open(this.collectionInfo.reportPath,"_blank")}},components:{draggable:C.a,vuescroll:w.a},computed:{dragOptions:function(){return{animation:300}}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-card",[a("el-row",{staticStyle:{display:"flex"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#dddddd","active-text":"关注"},on:{change:e.doFocus},model:{value:e.collectionInfo.isFocus,callback:function(t){e.$set(e.collectionInfo,"isFocus",t)},expression:"collectionInfo.isFocus"}}),e._v(" "),a("p",{staticStyle:{margin:"auto"}},[e._v(e._s(e.collectionInfo.collectionName))]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small",icon:"el-icon-setting"},on:{click:function(t){e.collectionEditDialog.visible=!0}}}),e._v(" "),a("el-dialog",{attrs:{title:"信息修改",visible:e.collectionEditDialog.visible,modal:!1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.collectionEditDialog,"visible",t)}}},[a("el-form",{attrs:{"label-position":"right"}},[a("el-form-item",{attrs:{label:"集合名称"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.collectionInfo.collectionName,callback:function(t){e.$set(e.collectionInfo,"collectionName",t)},expression:"collectionInfo.collectionName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信推送"}},[a("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.collectionInfo.wxPush,callback:function(t){e.$set(e.collectionInfo,"wxPush",t)},expression:"collectionInfo.wxPush"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editCollection}},[e._v("保 存")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{height:"5px"}}),e._v(" "),a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:8}},[a("el-card",{staticStyle:{height:"140px"}},[a("el-form",{ref:"form",attrs:{model:e.collectionInfo,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"线程数"}},[a("el-input-number",{attrs:{size:"small",min:1,max:99},on:{change:e.changePoolSize},model:{value:e.collectionInfo.threadPoolSize,callback:function(t){e.$set(e.collectionInfo,"threadPoolSize",t)},expression:"collectionInfo.threadPoolSize"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重复执行"}},[a("el-input-number",{attrs:{size:"small",min:1,max:9999},on:{change:e.changeRepeatTimes},model:{value:e.collectionInfo.repeatTimes,callback:function(t){e.$set(e.collectionInfo,"repeatTimes",t)},expression:"collectionInfo.repeatTimes"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{height:"5px"}}),e._v(" "),a("el-card",{staticStyle:{height:"700px"}},[a("el-row",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createVariable}},[e._v("新 增")])],1),e._v(" "),a("el-row",[a("el-table",{attrs:{data:e.collectionInfo.variableList,height:"600"}},[a("el-table-column",{attrs:{prop:"variableName",label:"变量名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editVariable(t.row)}},model:{value:t.row.variableName,callback:function(a){e.$set(t.row,"variableName",a)},expression:"scope.row.variableName"}},[e._v(e._s(t.row.variableName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"variableValue",label:"真实值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"备注"}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.variableDialog.visible,"close-on-click-modal":!1,modal:!1,width:"400px"},on:{"update:visible":function(t){return e.$set(e.variableDialog,"visible",t)}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"变量名"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.variableDialog.variableInfo.variableName,callback:function(t){e.$set(e.variableDialog.variableInfo,"variableName",t)},expression:"variableDialog.variableInfo.variableName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"真实值"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.variableDialog.variableInfo.variableValue,callback:function(t){e.$set(e.variableDialog.variableInfo,"variableValue",t)},expression:"variableDialog.variableInfo.variableValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.variableDialog.variableInfo.description,callback:function(t){e.$set(e.variableDialog.variableInfo,"description",t)},expression:"variableDialog.variableInfo.description"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.variableOperation(1)}}},[e._v("保 存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.variableDialog.deleteButtonIsShow,expression:"variableDialog.deleteButtonIsShow"}],attrs:{type:"error",size:"small"},on:{click:function(t){return e.variableOperation(2)}}},[e._v("删 除")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-card",{staticStyle:{height:"700px"}},[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.caseManageDialog.visible=!0}}},[e._v("Case管理")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.collectionExcute}},[e._v("执 行"),a("i",{staticClass:"el-icon-caret-right"})]),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("span",{staticStyle:{"font-size":"14px",color:"#606266"}},[e._v(e._s(e.collectionInfo.excuterName))]),e._v(" "),a("span",{staticStyle:{"font-size":"14px",color:"#606266"}},[e._v(e._s(e.collectionInfo.excuteDatetime))]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:e.openReport}},[e._v("测试报告")])],1)],1),e._v(" "),a("div",{staticClass:"dotted"}),e._v(" "),a("div",{staticStyle:{"margin-top":"10px",height:"600px"}},[a("vuescroll",{attrs:{ops:e.scroll}},[a("draggable",e._b({attrs:{list:e.caseInfo.caseList},on:{end:e.orderSave}},"draggable",e.dragOptions,!1),e._l(e.caseInfo.caseList,function(t){return a("div",{staticClass:"api-div"},[a("el-row",{staticStyle:{margin:"11px 10px"}},[a("el-col",{attrs:{span:21}},[a("span",{staticClass:"line-limit-length",staticStyle:{width:"95%","font-size":"15px"}},[e._v(e._s(t.caseName))])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-tag",{staticStyle:{transform:"translateY(-3px)"},attrs:{type:e.getTagType(t.caseType),size:"mini"}},[e._v(e._s(e.getTypeName(t.caseType)))])],1),e._v(" "),a("el-col",{attrs:{span:1}},[a("div",{staticClass:"delete-button",on:{click:function(a){return e.deleteCase(t)}}},[e._v("×")])])],1)],1)}),0)],1)],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.caseManageDialog.visible,"close-on-click-modal":!1,modal:!1,width:"95%",top:"20px"},on:{"update:visible":function(t){return e.$set(e.caseManageDialog,"visible",t)}}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-card",{staticStyle:{height:"600px"}},[a("div",{staticStyle:{height:"580px",width:"100%"}},[a("vuescroll",{attrs:{ops:e.scroll}},[a("draggable",e._b({staticStyle:{height:"580px"},attrs:{list:e.caseInfo.caseList,group:"caseList"},on:{change:e.orderSave}},"draggable",e.dragOptions,!1),e._l(e.caseInfo.caseList,function(t){return a("div",{staticClass:"api-div"},[a("el-row",{staticStyle:{margin:"11px 10px"}},[a("el-col",{attrs:{span:18}},[a("span",{staticClass:"line-limit-length",staticStyle:{width:"95%","font-size":"15px"}},[e._v(e._s(t.caseName))])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{type:e.getTagType(t.caseType),size:"mini"}},[e._v(e._s(e.getTypeName(t.caseType)))])],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"delete-button",on:{click:function(a){return e.deleteCase(t)}}},[e._v("×")])])],1)],1)}),0)],1)],1)])],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-card",{staticStyle:{"margin-left":"6px",height:"600px"}},[a("div",[a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{change:e.chaneCaseType},model:{value:e.caseManageDialog.caseType,callback:function(t){e.$set(e.caseManageDialog,"caseType",t)},expression:"caseManageDialog.caseType"}},e._l(e.caseManageDialog.caseTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"接口名称",size:"small"},on:{change:e.searchCaseList},model:{value:e.caseManageDialog.search.commomCase.caseName,callback:function(t){e.$set(e.caseManageDialog.search.commomCase,"caseName",t)},expression:"caseManageDialog.search.commomCase.caseName"}}),e._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"创建人",size:"small",clearable:"",filterable:""},on:{change:e.searchCaseList},model:{value:e.caseManageDialog.search.commomCase.createrCode,callback:function(t){e.$set(e.caseManageDialog.search.commomCase,"createrCode",t)},expression:"caseManageDialog.search.commomCase.createrCode"}},e._l(e.caseManageDialog.search.createrList,function(t){return a("el-option",{key:t.createrCode,attrs:{label:t.createrName,value:t.createrCode}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.createrName))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.createrCode))])])}),1),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.caseManageDialog.search.page,"page-size":e.caseManageDialog.search.pageSize,total:e.caseManageDialog.search.total,layout:"total, prev,pager, next"},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"dotted"}),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-row",{staticStyle:{margin:"11px 10px"}},[a("el-col",{attrs:{span:2}},[a("p")]),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",[e._v("Case名称")])]),e._v(" "),a("el-col",{attrs:{span:10}},[a("span",[e._v("描述")])])],1),e._v(" "),a("draggable",e._b({attrs:{list:e.caseManageDialog.AllCaseList,group:{name:"caseList",pull:"clone",put:!1}}},"draggable",e.dragOptions,!1),e._l(e.caseManageDialog.AllCaseList,function(t){return a("div",{staticClass:"api-div"},[a("el-row",{staticStyle:{margin:"11px 10px"}},[a("el-col",{attrs:{span:2}},[a("el-tag",{attrs:{type:e.getTagType(t.caseType),size:"mini"}},[e._v(e._s(e.getTypeName(t.caseType)))])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"line-limit-length",staticStyle:{width:"95%","font-size":"15px"}},[e._v(e._s(t.caseName))])]),e._v(" "),a("el-col",{attrs:{span:10}},[a("span",{staticClass:"line-limit-length",staticStyle:{"font-size":"14px",width:"95%"}},[e._v(e._s(t.description))])])],1)],1)}),0)],1)])],1)],1)],1)],1)},staticRenderFns:[]};var $,N=a("VU/8")(k,D,!1,function(e){a("SPR6")},"data-v-298356bc",null).exports;function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var z={comments:{comCollection:N},data:function(){return{createDialog:{visible:!1,collectionName:""},search:{collectionName:"",systemName:"",systemNameList:[],createrCode:"",createrList:[],page:1,pageSize:16,total:0,caseList:{}},row:0,col:0,collectionList:[],drawer:!1,collectionId:null,currentView:"",records:{collectionDetail:{dateTime:[],startDate:"",endDate:""},page:1,pageSize:10,total:0},recordsData:[]}},mounted:function(){this.getSystemNameList(),this.getCreaterList(),this.searchFocusCollection(),this.getExcuteRecords()},methods:($={tabClick:function(e){"0"===e.index?this.searchFocusCollection():"1"===e.index&&this.searchAllCollection()},getSystemNameList:function(){var e=this;this.$axios({method:"get",url:"/category/list"}).then(function(t){e.search.systemNameList=t.data.result},function(e){})},getCreaterList:function(){var e=this;this.$axios({method:"get",url:"/collection/creater"}).then(function(t){e.search.createrList=t.data.result},function(e){})},searchFocusCollection:function(){var e=this;this.$axios({method:"get",url:"/collection/focuslist"}).then(function(t){e.collectionList=t.data.result,e.row=Math.ceil(e.collectionList.length/4)},function(e){})},searchAllCollection:function(){var e=this;this.$axios({method:"post",url:"/collection/list",headers:{"Content-type":"application/json"},data:{page:this.search.page,pageSize:this.search.pageSize,collection:this.search}}).then(function(t){e.collectionList=t.data.result.list,e.search.total=t.data.result.total,e.row=Math.ceil(t.data.result.total/4)},function(e){})},getCol:function(e){var t=this.collectionList.length,a=4*(e-1);return 4*e<=t?this.collectionList.slice(a,a+4):this.collectionList.slice(a,t)},createCollection:function(){var e=this;this.$axios({method:"post",url:"/collection/create",headers:{"Content-type":"application/json"},data:this.createDialog}).then(function(t){!0===t.data.isSuccess&&(e.$message.success(t.data.result),e.createDialog.visible=!1,e.searchAllCollection())},function(e){})},handleCurrentChange:function(e){this.search.page=e,this.searchAllCollection()},getDetail:function(e){this.collectionId=e,this.drawer=!0,this.currentView=N},chooseDate:function(e){var t=this;new Promise(function(a,s){null===e?(t.records.collectionDetail.startDate="1970-01-01 00:00:00",t.records.collectionDetail.endDate="2099-12-31 23:59:59"):(t.records.collectionDetail.startDate=e[0],t.records.collectionDetail.endDate=e[1]),a()}).then(this.getExcuteRecords())},handleSizeChange:function(e){this.records.pageSize=e,this.getExcuteRecords()}},L($,"handleCurrentChange",function(e){this.records.page=e,this.getExcuteRecords()}),L($,"getExcuteRecords",function(){var e=this;this.$axios({method:"post",url:"/collection/records",headers:{"Content-type":"application/json"},data:this.records}).then(function(t){!0===t.data.isSuccess&&(e.recordsData=t.data.result.list,e.records.total=t.data.result.total)},function(e){})}),$)},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.tabClick}},[a("el-tab-pane",{attrs:{label:"关注集合"}},e._l(e.row,function(t){return a("el-row",{key:t,staticClass:"row",attrs:{gutter:10}},e._l(e.getCol(t),function(t){return a("el-col",{key:t.id,staticClass:"col",attrs:{span:6}},[a("div",{staticClass:"collection-div",on:{click:function(a){return e.getDetail(t.id)}}},[a("el-row",{staticStyle:{height:"30px"}},[a("p",{staticClass:"name-font"},[e._v(e._s(t.collectionName))])]),e._v(" "),a("el-row",[a("p",{staticClass:"date-font"},[e._v(e._s(t.excuteDatetime))])])],1)])}),1)}),1),e._v(" "),a("el-tab-pane",{attrs:{label:"全部集合"}},[a("el-card",[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createDialog.visible=!0}}},[e._v("新 增")]),e._v(" "),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"集合名称"},on:{change:e.searchAllCollection},model:{value:e.search.collectionName,callback:function(t){e.$set(e.search,"collectionName",t)},expression:"search.collectionName"}}),e._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"创建人",clearable:"",filterable:""},on:{change:e.searchAllCollection},model:{value:e.search.createrCode,callback:function(t){e.$set(e.search,"createrCode",t)},expression:"search.createrCode"}},e._l(e.search.createrList,function(t){return a("el-option",{key:t.createrCode,attrs:{label:t.createrName,value:t.createrCode}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.createrName))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.createrCode))])])}),1),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.search.page,"page-size":e.search.pageSize,total:e.search.total,layout:"total, prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.createDialog.visible,width:"400px"},on:{"update:visible":function(t){return e.$set(e.createDialog,"visible",t)}}},[a("el-form",{attrs:{"label-position":"right"}},[a("el-form-item",{attrs:{label:"集合名称"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.createDialog.collectionName,callback:function(t){e.$set(e.createDialog,"collectionName",t)},expression:"createDialog.collectionName"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createCollection}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.createDialog.visible=!1}}},[e._v("取 消")])],1)],1)],1),e._v(" "),a("br"),e._v(" "),e._l(e.row,function(t){return a("el-row",{key:t,staticClass:"row",attrs:{gutter:10}},e._l(e.getCol(t),function(t){return a("el-col",{key:t.id,staticClass:"col",attrs:{span:6}},[a("div",{staticClass:"collection-div",on:{click:function(a){return e.getDetail(t.id)}}},[a("el-row",{staticStyle:{height:"30px"}},[a("p",{staticClass:"name-font"},[e._v(e._s(t.collectionName))])]),e._v(" "),a("el-row",[a("p",{staticClass:"date-font"},[e._v(e._s(t.excuteDatetime))])])],1)])}),1)})],2),e._v(" "),a("el-tab-pane",{attrs:{label:"执行记录"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.chooseDate},model:{value:e.records.collectionDetail.dateTime,callback:function(t){e.$set(e.records.collectionDetail,"dateTime",t)},expression:"records.collectionDetail.dateTime"}}),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.records.page,"page-size":e.records.pageSize,"page-sizes":[10,20,50,100],total:e.records.total,layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-table",{ref:"multipleTable",attrs:{data:e.recordsData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"collectionName",label:"集合名",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"excuterName",label:"执行人",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"excuteDatetime",label:"执行时间",align:"center",sortable:""}})],1)],1)],1),e._v(" "),a("el-drawer",{attrs:{visible:e.drawer,"with-header":!1,"destroy-on-close":!0,size:"80%"},on:{"update:visible":function(t){e.drawer=t}}},[a(e.currentView,{tag:"component",attrs:{collectionId:e.collectionId}})],1)],1)},staticRenderFns:[]};var V=a("VU/8")(z,T,!1,function(e){a("/wa/")},null,null).exports,P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},B={data:function(){return{editType:0,table:{page:1,pageSize:10,total:0,tableData:[]},variableDialog:{visible:!1,variableInfo:{},defaultVariableInfo:{variableName:"",variableValue:"",description:""}}}},mounted:function(){this.searchVariableList()},methods:{searchVariableList:function(){var e=this;this.$axios({method:"post",url:"/variable/list",headers:{"Content-type":"application/json"},data:{page:this.table.page,pageSize:this.table.pageSize}}).then(function(t){e.table.tableData=t.data.result.list,e.table.total=t.data.result.total},function(e){})},handleSizeChange:function(e){this.table.pageSize=e,this.searchVariableList()},handleCurrentChange:function(e){this.table.page=e,this.searchVariableList()},createVariable:function(){this.editType=1,this.variableDialog.visible=!0,this.variableDialog.variableInfo=P({},this.variableDialog.defaultVariableInfo)},EditVariable:function(e){this.variableDialog.visible=!0,this.editType=2,this.variableDialog.variableInfo=P({},e)},deleteVariable:function(e){var t=this;this.$axios({method:"post",url:"/variable/delete",headers:{"Content-type":"application/json"},data:e}).then(function(e){!0===e.data.isSuccess?(t.searchVariableList(),t.$message.success(e.data.result)):!1===e.data.isSuccess&&t.$message.error(e.data.msg)},function(e){})},saveVariable:function(){var e=this,t="";1===this.editType?t="/variable/create":2===this.editType&&(t="/variable/update"),this.$axios({method:"post",url:t,headers:{"Content-type":"application/json"},data:this.variableDialog.variableInfo}).then(function(t){!0===t.data.isSuccess?(e.variableDialog.visible=!1,e.searchVariableList(),e.$message.success(t.data.result)):!1===t.data.isSuccess&&e.$message.error(t.data.msg)},function(e){})}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("el-row",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createVariable}},[e._v("新 增")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.table.page,"page-size":e.table.pageSize,"page-sizes":[10,20,50,100],total:e.table.total,layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-row",[a("el-table",{attrs:{data:e.table.tableData,height:"600"}},[a("el-table-column",{attrs:{prop:"variableName",label:"变量名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"variableValue",label:"真实值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.EditVariable(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.deleteVariable(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.variableDialog.visible,"close-on-click-modal":!1,width:"400px"},on:{"update:visible":function(t){return e.$set(e.variableDialog,"visible",t)}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"变量名"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.variableDialog.variableInfo.variableName,callback:function(t){e.$set(e.variableDialog.variableInfo,"variableName",t)},expression:"variableDialog.variableInfo.variableName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"真实值"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.variableDialog.variableInfo.variableValue,callback:function(t){e.$set(e.variableDialog.variableInfo,"variableValue",t)},expression:"variableDialog.variableInfo.variableValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.variableDialog.variableInfo.description,callback:function(t){e.$set(e.variableDialog.variableInfo,"description",t)},expression:"variableDialog.variableInfo.description"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveVariable}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.variableDialog.visible=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var M=a("VU/8")(B,E,!1,function(e){a("5vsP")},"data-v-38cd7f2a",null).exports,R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},j={data:function(){return{editType:0,tableData:[],editDialog:{visible:!1,categoryInfo:{},defaultCategoryInfo:{categoryName:"",description:""}}}},mounted:function(){this.getCategoryList()},methods:{getCategoryList:function(){var e=this;this.$axios({method:"get",url:"/category/list"}).then(function(t){e.tableData=t.data.result},function(e){})},createCategory:function(){this.editType=1,this.editDialog.visible=!0,this.editDialog.categoryInfo=R({},this.editDialog.defaultCategoryInfo)},saveCategory:function(){var e=this,t="";1===this.editType?t="/category/create":2===this.editType&&(t="/category/update"),this.$axios({method:"post",url:t,headers:{"Content-type":"application/json"},data:this.editDialog.categoryInfo}).then(function(t){!0===t.data.isSuccess?(e.editDialog.visible=!1,e.getCategoryList(),e.$message.success(t.data.result)):!1===t.data.isSuccess&&e.$message.error(t.data.msg)},function(e){})},editCategory:function(e){this.editType=2,this.editDialog.visible=!0,this.editDialog.categoryInfo=R({},e)},deleteCategory:function(e){var t=this;this.$axios({method:"post",url:"/category/delete",headers:{"Content-type":"application/json"},data:e}).then(function(e){!0===e.data.isSuccess?(t.getCategoryList(),t.$message.success(e.data.result)):!1===e.data.isSuccess&&t.$message.error(e.data.msg)},function(e){})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createCategory}},[e._v("新 增")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"categoryName",width:"200",label:"类别名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.editCategory(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.deleteCategory(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.editDialog.visible,"close-on-click-modal":!1,width:"400px"},on:{"update:visible":function(t){return e.$set(e.editDialog,"visible",t)}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"类别名称"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.editDialog.categoryInfo.categoryName,callback:function(t){e.$set(e.editDialog.categoryInfo,"categoryName",t)},expression:"editDialog.categoryInfo.categoryName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.editDialog.categoryInfo.description,callback:function(t){e.$set(e.editDialog.categoryInfo,"description",t)},expression:"editDialog.categoryInfo.description"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveCategory}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.editDialog.visible=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var q=a("VU/8")(j,A,!1,function(e){a("yWbU")},"data-v-9e91366a",null).exports,O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},F={data:function(){return{search:{page:1,pageSize:10,total:0},tableData:[],editType:null,dialog:{visible:!1,dataBaseInfo:{},defaultDataBaseInfo:{variableName:"",variableValue:"",description:""},dbType:[{label:"MySQL",value:1},{label:"Oracle",value:2}]}}},mounted:function(){this.getDataBaseList()},methods:{getDataBaseList:function(){var e=this;this.$axios({method:"post",url:"/db/list",headers:{"Content-type":"application/json"},data:this.search}).then(function(t){e.tableData=t.data.result.list,e.search.total=t.data.result.total},function(e){})},createDataBase:function(){this.dialog.visible=!0,this.editType=1,this.dialog.dataBaseInfo=O({},this.dialog.defaultDataBaseInfo)},handleSizeChange:function(e){this.search.pageSize=e,this.getDataBaseList()},handleCurrentChange:function(e){this.search.page=e,this.getDataBaseList()},getDBStatus:function(e){return 1===e?"MySQL":2===e?"Oracle":void 0},EditDataBase:function(e){this.dialog.visible=!0,this.editType=2,this.dialog.dataBaseInfo=O({},e)},deleteDataBase:function(e){var t=this;this.$axios({method:"post",url:"/db/delete",headers:{"Content-type":"application/json"},data:e}).then(function(e){!0===e.data.isSuccess?(t.getDataBaseList(),t.$message.success(e.data.result)):!1===e.data.isSuccess&&t.$message.error(e.data.msg)},function(e){})},saveDataBase:function(){var e=this,t="";1===this.editType?t="/db/create":2===this.editType&&(t="/db/update"),this.$axios({method:"post",url:t,headers:{"Content-type":"application/json"},data:this.dialog.dataBaseInfo}).then(function(t){!0===t.data.isSuccess?(e.dialog.visible=!1,e.getDataBaseList(),e.$message.success(t.data.result)):!1===t.data.isSuccess&&e.$message.error(t.data.msg)},function(e){})}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("el-row",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createDataBase}},[e._v("新 增")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":e.search.page,"page-size":e.search.pageSize,"page-sizes":[10,20,50,100],total:e.search.total,layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-row",[a("el-table",{attrs:{data:e.tableData,height:"600"}},[a("el-table-column",{attrs:{prop:"dbName",label:"数据库名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"databaseType",label:"数据库类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(e.getDBStatus(t.row.databaseType)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"URL"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.EditDataBase(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.deleteDataBase(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialog.visible,"close-on-click-modal":!1,width:"400px"},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"数据库名"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.dialog.dataBaseInfo.dbName,callback:function(t){e.$set(e.dialog.dataBaseInfo,"dbName",t)},expression:"dialog.dataBaseInfo.dbName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"库类型"}},[a("el-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择"},model:{value:e.dialog.dataBaseInfo.databaseType,callback:function(t){e.$set(e.dialog.dataBaseInfo,"databaseType",t)},expression:"dialog.dataBaseInfo.databaseType"}},e._l(e.dialog.dbType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"URL"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.dialog.dataBaseInfo.url,callback:function(t){e.$set(e.dialog.dataBaseInfo,"url",t)},expression:"dialog.dataBaseInfo.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.dialog.dataBaseInfo.username,callback:function(t){e.$set(e.dialog.dataBaseInfo,"username",t)},expression:"dialog.dataBaseInfo.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.dialog.dataBaseInfo.password,callback:function(t){e.$set(e.dialog.dataBaseInfo,"password",t)},expression:"dialog.dataBaseInfo.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"220px"},model:{value:e.dialog.dataBaseInfo.description,callback:function(t){e.$set(e.dialog.dataBaseInfo,"description",t)},expression:"dialog.dataBaseInfo.description"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveDataBase}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var H=a("VU/8")(F,U,!1,function(e){a("AXem")},"data-v-6d39342e",null).exports,Y={components:{comGlobalVarible:M,comCategory:q,comDataBaseConfig:H},data:function(){return{currentView:M}},methods:{handleSelect:function(e){"1"===e?this.currentView="comGlobalVarible":"2"===e?this.currentView="comCategory":"3"===e&&(this.currentView="comDataBaseConfig")}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"900px",border:"1px solid #eee"}},[a("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[a("el-menu",{attrs:{"default-active":"1"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[a("i",{staticClass:"el-icon-zoom-in"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("全局变量")])]),e._v(" "),a("el-menu-item",{attrs:{index:"2"}},[a("i",{staticClass:"el-icon-edit-outline"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("分类配置")])]),e._v(" "),a("el-menu-item",{attrs:{index:"3"}},[a("i",{staticClass:"el-icon-coin"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("数据库配置")])])],1)],1),e._v(" "),a("el-main",[a(e.currentView,{tag:"component"})],1)],1)},staticRenderFns:[]};var K=a("VU/8")(Y,G,!1,function(e){a("/f/z")},"data-v-1a645cde",null).exports,Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("br"),e._v(" "),a("div",[e._v("\n    选择一个功能：\n    "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getContent},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.data,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1)],1),e._v(" "),a("br"),e._v(" "),a("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea",rows:10},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)},staticRenderFns:[]};var J=a("VU/8")({data:function(){return{value:"",data:[{name:"__Random",content:"使用方式：${__Random(param1,param2,param3)}，返回一个随机数字。\n参数说明：param1最小值，param2最大值,param3(可选)保存的变量名。\n举例: ${__Random(1,100,Number)}，获取一个1~100间的随机数字，保存为变量Number。${__Random(1,100)}，仅获取一个1~100间的随机数字。"},{name:"__time",content:"使用方式：${__time(param1,param2)}，返回时间。\n参数说明：param1 时间格式，param2(可选)保存的变量名\n举例：\n${__time(,)}  获取当前时间毫秒 \n${__time(/1000,TIME)}  获取当前时间秒，并保存为变量TIME \n${__time(yyyy-MM-dd,)}  获取yyyy-MM-dd格式时间 \n${__time(yyyy-MM-dd HH:mm:ss,DATE)}   获取yyyy-MM-dd HH:mm:ss格式时间，并保存为变量DATE"}],content:""}},methods:{getContent:function(){var e=this;this.data.forEach(function(t){t.name===e.value&&(e.content=t.content)})}}},Q,!1,function(e){a("yV8Y")},"data-v-5c4bbf8e",null).exports,W={data:function(){return{currentView:p,activeIndex:"1-1",userName:"000000"}},components:{comHttpCaseManage:p,comDubboCaseManage:f,comSqlCaseManage:_,comCollectionList:V,comConfig:K,comFunctionAssistant:J},mounted:function(){this.getUserName()},methods:{handleSelect:function(e,t){var a=t[t.length-1];"1-1"===a?this.currentView=p:"1-2"===a?this.currentView=f:"1-3"===a?this.currentView=_:"2"===a?this.currentView=V:"3"===a?this.currentView=K:"4"===a?this.currentView=J:"4"===a&&(this.currentView=p)},getUserName:function(){var e=this;this.$axios({method:"get",url:"/username"}).then(function(t){e.userName=t.data.result.userName},function(e){})}}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-menu",{attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#1E8AF9","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[e._v("Case管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-1"}},[e._v("Http")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-2"}},[e._v("Dubbo")]),e._v(" "),a("el-menu-item",{attrs:{index:"1-3"}},[e._v("SQL")])],2),e._v(" "),a("el-menu-item",{attrs:{index:"2"}},[e._v("集合")]),e._v(" "),a("el-menu-item",{attrs:{index:"3"}},[e._v("配置")]),e._v(" "),a("el-menu-item",{attrs:{index:"4"}},[e._v("函数助手")]),e._v(" "),a("a",{staticClass:"name"},[e._v(e._s(e.userName)+"，您好！")])],1),e._v(" "),a(e.currentView,{tag:"component"})],1)},staticRenderFns:[]};var Z=a("VU/8")(W,X,!1,function(e){a("zYnL")},"data-v-5e5c812a",null).exports,ee=a("/ocq");s.default.use(ee.a);var te=new ee.a({routes:[{path:"/login",name:"login",component:r},{path:"/index",name:"index",component:Z},{path:"/collection/:id",name:"collection",component:N,props:!0}]});te.beforeEach(function(e,t,a){if("/login"===e.path)a();else{var s=localStorage.getItem("Authorization");"null"===s||""===s?a("/login"):a()}});var ae=te,se={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var le=a("VU/8")({components:{},data:function(){return{}}},se,!1,function(e){a("2dYY")},null,null).exports,ie=a("zL8q"),oe=a.n(ie),ne=(a("tvR6"),a("mtWM")),re=a.n(ne);re.a.interceptors.request.use(function(e){return localStorage.getItem("Authorization")&&(e.headers.Authorization=localStorage.getItem("Authorization")),e},function(e){return Promise.reject(e)}),re.a.interceptors.response.use(function(e){return"Token过期"!==e.data&&"Token无效或异常"!==e.data||(localStorage.removeItem("Authorization"),ae.push("/login")),e},function(e){return Promise.reject(e)});var ce=re.a,de=a("vO7p"),ue=a.n(de);a("j1ja");ce.defaults.baseURL="http://127.0.0.1:8070",s.default.prototype.$axios=ce,s.default.config.productionTip=!1,s.default.use(l.a),s.default.use(oe.a),s.default.use(ue.a),new s.default({el:"#app",router:ae,store:i,render:function(e){return e(le)},components:{App:le},template:"<App/>"}),ae.beforeEach(function(e,t,a){e.matched.some(function(e){return e.meta.requireAuth})?sessionStorage.getItem("access_token")?a():a({path:"/manage",query:{redirect:e.fullPath}}):a()})},SPR6:function(e,t){},WvbY:function(e,t){},i7PA:function(e,t){},tvR6:function(e,t){},yV8Y:function(e,t){},yWbU:function(e,t){},zYnL:function(e,t){}},[0]);
//# sourceMappingURL=app.99a9b2b8e5d49d7c28ee.js.map